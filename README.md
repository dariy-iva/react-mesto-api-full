# Проект: Место

[Ссылка на сайт](https://mesto.dariy-iva.nomoredomains.rocks/)

## О проекте

Проект Mesto с объединенными фронтенд и бэкенд частями. Приложение для просмотра чужих и размещения собственных фотографий мест, где Вы были или только хотите побывать.

<img src="./Promo.png" alt="photo" />


### Требования к проекту

#### Фронтенд
✔ отображение на странице данных пользователя (реализовано через глобальный стейт CurrentUserContext, подписку на контекст компонентов приложения, использование хука useEffect для обновления данных при изменении контекста)  
✔ возможность добавления постов, удаления постов с проверкой на владельца карточки, постановки/удаления лайков к постам, просмотр увеличенных фотографий из постов (реализовано через компоненты Card, PopupWithForm и модальные окна AddPostPopup, DeletePostPopup, ImagePopup, отправку запросов из api.js)  
✔ возможность редактировать профиль и аватар пользователя (реализовано через компоненты Main, PopupWithForm и модальные окна EditAvatarPopup, EditProfilePopup, отправку запросов из api.js)  
✔ в формах используются как управляемые компоненты (реализовано в EditProfilePopup и AddPostPopup), так и рефы (реализовано в EditAvatarPopup)  
✔ возможность авторизации и регистрации пользователей (реализовано через компоненты Login и Register, глобальный стейт LoggedInContext, отправку запросов и проверку наличия токена из auth.js)  
✔ уведомление пользователя об успешной/неуспешной регистрации (реализовано через модальное окно InfoTooltipPopup)  
✔ защита роутов при попадании неавторизованного пользователя на сайт, кроме роутов авторизации и регистрации (реализовано через компонент ProtectedRoute)  
✔ хранение токена в локальном хранилище браузера  
✔ дополнительно реализовано (по усмотрению студента): 
 - возможность выхода из сеанса
 - дополнительная проверка при удалении карточки (реализовано через модальное окно для подтверждения)
 - индикация отправки формы (анимация)
 - закрытие модальных окон при нажатии на Esc (реализовано через хук useEffect)

#### Бэкенд
✔ подключена БД (реализовано на mongoDB)  
✔ две сущности - пользователь и карточка (созданы схемы и модели с помощью модуля mongoose)  
✔ функциональность получения данных всех карточек, одной карточки по id, удаления карточки по id с проверкой на владельца, добавления/удаления лайков к карточкам, редактирования данных профиля, аватара (реализовано по цепочке контроллеры -> роуты -> подключение в app.js)  
✔ валидация приходящих данных на уровне схем (реализовано с модулем validator)  
✔ валидация приходящих на сервер запросов до их передачи контроллерам (реализовано с модулем celebrate)  
✔ хеширование пароля пользователя перед сохранением в БД (реализовано с модулем bcrypt), хеш пароля не возвращается из базы по умолчанию  
✔ выдача клиенту токена сроком на 7 дней  
✔ функциональность регистрации и авторизации пользователя  
✔ защита остальных маршрутов авторизацией (реализовано через мидлвэру, проверяющую наличие токена у клиента)  
✔ обработка ошибок при запросах с возвратом соответсвующих кода и сообщения об ошибке клиенту (кастомная + централизованная)  
✔ логгирование запросов и ошибок (реализовано через мидлвэру, использовался модуль winston)  
✔ обработка CORS запросов (реализовано через мидлвэру)  
✔ деплой проекта: проект развернут на облачном сервере, к серверу прикреплен домен, фронтенд и бэкенд размещены на разных доменах, выпущены и подключены сертификаты https, секретный ключ для генерации токена хранится на сервере в переменных окружения (.env), сервер самостоятельно восстанавливается и продолжает принимать запросы после краш-теста  
✔ дополнительно реализовано (по усмотрению студента): 
 - храние токена в куках клиента
 - функциональность выхода из сеанса
 - лимит на количество запросов от одного клиента за промежуток времени (реализовано с модулем express-rate-limit)


### Стек:

* HTML
* CSS
* JS
* React
* Node.js
* Express
* MongoDB

  
Публичный IP: 51.250.7.145 
